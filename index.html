<yb_canvas uuid="571290de-27a0-beef-4cf6-4e73bd772a63" mversion="19" type="code" subtype="single">

<title>新年倒计时</title>

<filename>newyear_check.html</filename>

<yb_code lang="html"><!DOCTYPE html>

<html>

<head>

<title>新年倒计时验证</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

/* 全局样式 */

{
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {

/* 初始背景图片 */

background-image: url('https://hw2.a.kwimgs.com/upic/2025/12/31/19/BMjAyNTEyMzExOTA1MzRfMzY4OTgxMzkyOV8xODM4MDc3MTYxNzJfMl82_B9ff905043c3da17d85abab5ff0aa9426.jpg?tag=1-1767179198-sr-0-5967be10b83044ab-3d4b358efb604372&clientCacheKey=3xiycxrmhc76jm2.jpg&di=529c00c8&bp=10001 ');

background-size: cover;

background-position: center;

background-attachment: fixed;

background-repeat: no-repeat;

min-height: 100vh;

font-family: Arial, sans-serif;

padding: 20px;

color: #333;

transition: background-image 0.5s ease;

}

/* 半透明遮罩 */

body::before {

content: '';

position: fixed;

top: 0;

left: 0;

right: 0;

bottom: 0;

background-color: rgba(255, 255, 255, 0.3);

z-index: -1;

}

h1 {

text-align: center;

color: #d32f2f;

margin-bottom: 20px;

text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);

font-size: 24px;

}

h2 {

color: #1976d2;

margin-bottom: 15px;

text-align: center;

}

.time {

font-size: 28px;

color: #1976d2;

font-weight: bold;

margin: 20px 0;

text-align: center;

text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);

}

.box {

background-color: rgba(255, 255, 255, 0.85);

border-radius: 15px;

padding: 20px;

margin: 20px auto;

max-width: 90%;

box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);

text-align: center;

}

.media {

width: 100%;

max-width: 300px;

border-radius: 10px;

margin: 10px auto;

display: block;

border: 2px solid #fff;

box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);

cursor: pointer;

transition: transform 0.3s, box-shadow 0.3s;

}

.media:hover {

transform: scale(1.02);

box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);

}

input {

width: 100%;

padding: 12px;

margin: 10px 0;

border: 1px solid #ddd;

border-radius: 8px;

font-size: 16px;

background-color: rgba(255, 255, 255, 0.9);

}

button {

width: 100%;

padding: 12px;

margin: 10px 0;

border: none;

border-radius: 8px;

font-size: 16px;

font-weight: bold;

color: white;

background-color: #4caf50;

cursor: pointer;

transition: background-color 0.3s;

}

button:hover {

background-color: #388e3c;

}

.error {

color: #d32f2f;

font-weight: bold;

margin: 10px 0;

text-align: center;

}

.hidden {

display: none;

}

.video-container {

margin: 15px 0;

}

.video-box {

margin: 20px 0;

}

.video-title {

font-size: 18px;

color: #e91e63;

margin-bottom: 10px;

}

.click-hint {

font-size: 14px;

color: #2196f3;

font-style: italic;

margin-top: 5px;

}

.background-change-notice {

background-color: rgba(255,235,59,0.2);

padding: 15px;

border-radius: 10px;

margin-top: 20px;

text-align: center;

color: #f57c00;

font-weight: bold;

}

/* 添加的俏皮话样式 */

.cute-message {

background-color: rgba(255, 182, 193, 0.2);

border-radius: 15px;

padding: 20px;

margin: 20px auto;

max-width: 90%;

text-align: center;

border: 2px solid #ffb6c1;

color: #d81b60;

font-size: 18px;

line-height: 1.6;

box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);

}

.cute-message p {

margin: 10px 0;

}

.cute-message .emoji {

font-size: 24px;

margin: 0 5px;

}

.cute-message .signature {

font-style: italic;

color: #9c27b0;

margin-top: 15px;

font-size: 16px;

}

@media (max-width: 768px) {

body {

padding: 10px;

}

h1 {

font-size: 20px;

}

h2 {

font-size: 18px;

}

.time {

font-size: 24px;

}

.box {

padding: 15px;

max-width: 95%;

}

.cute-message {

font-size: 16px;

padding: 15px;

}

}

</style>

</head>

<body>

<div id="verifySection" class="box">

新年倒计时验证

必须回答问题才能访问页面内容：

问题：你是几班的？

<input type="text" id="answerInput" placeholder="请输入答案（如：你是几班你自己知道）" autocomplete="off">

<button onclick="checkAnswer()">提交验证</button>

<div id="errorMsg" class="error"></div>

</div>

<div id="mainContent" class="hidden">

新年倒计时

距离 2026 年还有：

<div class="time">

0天

0小时

0分

0秒

</div>

<div class="box">

新年图片

<img class="media clickable-background" id="newYearImage" src="https://p2.a.yximgs.com/ufile/atlas/NTI1MDkxNTg3NDc5NDA0MjQ1Ml8xNzY0Mzc5NzQ4OTkw_0.jpg " alt="新年烟花">

</div>

<div class="box video-box">

新年视频一

<div class="video-container">

<video class="media" controls>

<source src="https://tx2.a.kwimgs.com/upic/2025/01/24/18/BMjAyNTAxMjQxODQ3MTFfMTQxMzI5Mjk4NF8xNTQ4NTQ0NTM1OTlfMl8z_b_B5c569709079fc9bc82dbb95c531f9ba5.mp4?tag=1-1767185574-unknown-0-3gs2y1uejp-38732147162c7c36&clientCacheKey=3xdu4fhsx66xep6_b.mp4&bp=10000&kwai-not-alloc=35&tt=b&ss=vps " type="video/mp4">

您的浏览器不支持视频播放

</video>

点击播放按钮观看新年庆祝视频一

</div>

</div>

<div class="box video-box">

新年视频二

<div class="video-container">

<video class="media clickable-background" id="secondVideo" controls>

<source src="https://tx2.a.kwimgs.com/upic/2025/12/31/19/BMjAyNTEyMzExOTAzMThfOTE3NzkyMjA2XzE4MzgwNzM1Mzc0MF8wXzM=_b_B1f4dcd3ecffff9a5ffacec836f5ed80b.mp4?tag=1-1767181476-unknown-0-nksdqdrey8-dfdb1fd505996399&clientCacheKey=3xwya98ss94p6bu_b.mp4&bp=10000&kwai-not-alloc=35&tt=b&ss=vps " type="video/mp4">

您的浏览器不支持视频播放

</video>

点击播放按钮观看新年庆祝视频二

</div>

</div>

<div class="cute-message">

能不能给我加班级分呀，就10分ε٩(๑> ₃ <)۶з

要不给我一块钱也得，嘻嘻。不给就算了

（孙）

</div>

<div id="backgroundChangeNotice" class="background-change-notice hidden">

✨ 页面背景已成功更换！

</div>

</div>

<script>

// 1. 联网获取准确时间

async function getNetworkTime() {

try {

const response = await fetch('https://worldtimeapi.org/api/timezone/Asia/Shanghai ');

const data = await response.json();

return new Date(data.datetime);

} catch (error) {

console.log('使用本地时间');

return new Date();

}

}

// 2. 倒计时功能

async function startCountdown() {

const now = await getNetworkTime();

const nextYear = now.getFullYear() + 1;

const newYear = new Date(nextYear, 0, 1, 0, 0, 0);

function update() {

const timeLeft = newYear - new Date();

const days = Math.floor(timeLeft / (10006060*24));

const hours = Math.floor((timeLeft % (1000606024)) / (100060*60));

const minutes = Math.floor((timeLeft % (10006060)) / (1000*60));

const seconds = Math.floor((timeLeft % (1000*60)) / 1000);

document.getElementById('days').textContent = days;

document.getElementById('hours').textContent = hours;

document.getElementById('minutes').textContent = minutes;

document.getElementById('seconds').textContent = seconds;

document.getElementById('nextYear').textContent = nextYear;

}

update();

setInterval(update, 1000);

}

// 3. 验证答案（核心功能）- 必须先验证才能访问

function checkAnswer() {

const input = document.getElementById('answerInput').value.trim();

const errorMsg = document.getElementById('errorMsg');

const mainContent = document.getElementById('mainContent');

const verifySection = document.getElementById('verifySection');

// 正确答案

const correctAnswers = ['二2班', '2', '2班'];

// 验证：输入是否在正确答案中

if (correctAnswers.includes(input)) {

// 验证成功

errorMsg.textContent = '';

mainContent.classList.remove('hidden');

verifySection.classList.add('hidden');

startCountdown();

// 设置背景更换功能

setupBackgroundChange();

// 保存验证状态

localStorage.setItem('verificationPassed', 'true');

} else {

// 验证失败

errorMsg.textContent = '❌连这个都不知道吗（真不知道假不知道：不是，你连自己几班都不知道吗你是我们班的吗?）';

document.getElementById('answerInput').value = '';

document.getElementById('answerInput').focus();

}

}

// 4. 优化的背景更换功能

function setupBackgroundChange() {

// 新背景图片链接

const newBackgroundUrl = 'https://p2.a.yximgs.com/ufile/atlas/NTE5MjY1MDUyNjYyMzA0OTQwNV8xNzM5ODc5Mzc1NDgw_0.jpg ';

// 获取所有可点击的背景更换元素

const clickableElements = document.querySelectorAll('.clickable-background');

const noticeElement = document.getElementById('backgroundChangeNotice');

// 预加载背景图片

function preloadBackgroundImage(url, callback) {

const img = new Image();

img.onload = function() {

callback(true, url);

};

img.onerror = function() {

console.error('背景图片加载失败:', url);

callback(false, url);

};

img.src = url;

}

// 更改背景的函数

function changeBackground(event) {

// 防止视频点击事件冒泡

if (event) {

event.stopPropagation();

}

// 预加载背景图片

preloadBackgroundImage(newBackgroundUrl, function(success, url) {

if (success) {

// 更改body的背景图片

document.body.style.backgroundImage =  url('${url}') ;

// 显示提示

noticeElement.classList.remove('hidden');

// 5秒后隐藏提示

setTimeout(() => {

noticeElement.classList.add('hidden');

}, 5000);

// 保存到本地存储

localStorage.setItem('customBackground', url);

console.log('背景已成功更换为:', url);

} else {

alert('背景图片加载失败，请检查网络连接！');

}

});

}

// 为所有可点击元素添加点击事件

clickableElements.forEach(element => {

// 移除之前的事件监听器，避免重复绑定

element.removeEventListener('click', changeBackground);

element.addEventListener('click', changeBackground);

// 为视频元素添加特殊处理，防止点击播放按钮触发背景更换

if (element.tagName === 'VIDEO') {

element.addEventListener('click', function(event) {

// 如果点击的是播放按钮或控制条，不更换背景

const isControlClick = event.target.className === 'media' ||

event.target.tagName === 'BUTTON' ||

event.target.closest('button') !== null;

if (!isControlClick) {

changeBackground(event);

}

});

}

});

console.log('背景更换功能已初始化，可点击元素数量:', clickableElements.length);

}

// 5. 按回车键提交验证

document.getElementById('answerInput').addEventListener('keypress', function(e) {

if (e.key === 'Enter') {

checkAnswer();

}

});

// 6. 页面加载时检查验证状态

document.addEventListener('DOMContentLoaded', function() {

// 清除之前的验证状态，确保每次都需要重新验证

localStorage.removeItem('verificationPassed');

// 检查是否有保存的自定义背景

const savedBackground = localStorage.getItem('customBackground');

if (savedBackground) {

document.body.style.backgroundImage =  url('${savedBackground}') ;

console.log('已应用保存的背景:', savedBackground);

}

// 聚焦到输入框

document.getElementById('answerInput').focus();

// 立即设置背景更换功能（即使未验证，为调试目的）

// 这样可以在控制台测试点击事件

setupBackgroundChange();

});

</script>

</body>

</html>
